{"version":3,"sources":["../src/dom.ts","../src/hooks.ts","../src/scheduler.ts","../src/reconciler.ts","../src/h.ts","../src/suspense.ts","../src/index.ts","src/use-state.tsx","node_modules/parcel/src/builtins/hmr-runtime.js"],"names":["OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","data","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","push","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","JSON","parse","type","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","id","every","generated","js","console","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","log","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","document","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","length","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"use-state.29a24d98.js","sourceRoot":"..","sourcesContent":["import { Attributes, DOM, IFiber } from \"./type\"\r\nimport { isStr, LANE } from \"./reconciler\"\r\n\r\nexport const updateElement = <P extends Attributes>(\r\n  dom: DOM,\r\n  oldProps: P,\r\n  newProps: P\r\n) => {\r\n  for (let name in { ...oldProps, ...newProps }) {\r\n    let oldValue = oldProps[name]\r\n    let newValue = newProps[name]\r\n\r\n    if (oldValue === newValue || name === \"children\") {\r\n    } else if (name === \"style\") {\r\n      if (isStr(newValue)) {\r\n        dom.setAttribute(name, newValue)\r\n      } else {\r\n        for (const k in { ...oldValue, ...newValue }) {\r\n          if (!(oldValue && newValue && oldValue[k] === newValue[k])) {\r\n            ;(dom as any)[name][k] = newValue?.[k] || \"\"\r\n          }\r\n        }\r\n      }\r\n    } else if (name[0] === \"o\" && name[1] === \"n\") {\r\n      name = name.slice(2).toLowerCase() as Extract<keyof P, string>\r\n      if (oldValue) dom.removeEventListener(name, oldValue)\r\n      dom.addEventListener(name, newValue)\r\n    } else if (name in dom && !(dom instanceof SVGElement)) {\r\n      ;(dom as any)[name] = newValue || \"\"\r\n    } else if (newValue == null || newValue === false) {\r\n      dom.removeAttribute(name)\r\n    } else {\r\n      dom.setAttribute(name, newValue)\r\n    }\r\n  }\r\n}\r\n\r\nexport const createElement = <P = Attributes>(fiber: IFiber) => {\r\n  const dom =\r\n    fiber.type === \"text\"\r\n      ? document.createTextNode(\"\")\r\n      : fiber.lane & LANE.SVG\r\n      ? document.createElementNS(\r\n          \"http://www.w3.org/2000/svg\",\r\n          fiber.type as string\r\n        )\r\n      : document.createElement(fiber.type as string)\r\n  updateElement(dom as DOM, {} as P, fiber.props as P)\r\n  return dom\r\n}\r\n","import { dispatchUpdate, isFn, getCurrentFiber } from \"./reconciler\"\r\nimport {\r\n  DependencyList,\r\n  Reducer,\r\n  IFiber,\r\n  Dispatch,\r\n  SetStateAction,\r\n  EffectCallback,\r\n  HookTypes,\r\n  RefObject,\r\n  IEffect,\r\n} from \"./type\"\r\nlet cursor = 0\r\n\r\nexport const resetCursor = () => {\r\n  cursor = 0\r\n}\r\n\r\nexport const useState = <T>(initState: T): [T, Dispatch<SetStateAction<T>>] => {\r\n  return useReducer(null, initState)\r\n}\r\n\r\nexport const useReducer = <S, A>(\r\n  reducer?: Reducer<S, A>,\r\n  initState?: S\r\n): [S, Dispatch<A>] => {\r\n  const [hook, current]: [any, IFiber] = getHook<S>(cursor++)\r\n  return [\r\n    hook.length === 0 ? (hook[0] = initState) : hook[0],\r\n    (value: A | Dispatch<A>) => {\r\n      hook[0] = reducer\r\n        ? reducer(hook[0], value as any)\r\n        : isFn(value)\r\n        ? value(hook[0])\r\n        : value\r\n      dispatchUpdate(current)\r\n    },\r\n  ]\r\n}\r\n\r\nexport const useEffect = (cb: EffectCallback, deps?: DependencyList): void => {\r\n  return effectImpl(cb, deps!, \"effect\")\r\n}\r\n\r\nexport const useLayout = (cb: EffectCallback, deps?: DependencyList): void => {\r\n  return effectImpl(cb, deps!, \"layout\")\r\n}\r\n\r\nconst effectImpl = (\r\n  cb: EffectCallback,\r\n  deps: DependencyList,\r\n  key: HookTypes\r\n): void => {\r\n  const [hook, current] = getHook(cursor++)\r\n  if (isChanged(hook[1], deps)) {\r\n    hook[0] = cb\r\n    hook[1] = deps\r\n    current.hooks[key].push(hook)\r\n  }\r\n}\r\n\r\nexport const useMemo = <S = Function>(\r\n  cb: () => S,\r\n  deps?: DependencyList\r\n): S => {\r\n  const hook = getHook<S>(cursor++)[0]\r\n  if (isChanged(hook[1], deps!)) {\r\n    hook[1] = deps\r\n    return (hook[0] = cb())\r\n  }\r\n  return hook[0]\r\n}\r\n\r\nexport const useCallback = <T extends (...args: any[]) => void>(\r\n  cb: T,\r\n  deps?: DependencyList\r\n): T => {\r\n  return useMemo(() => cb, deps)\r\n}\r\n\r\nexport const useRef = <T>(current: T): RefObject<T> => {\r\n  return useMemo(() => ({ current }), [])\r\n}\r\n\r\nexport const getHook = <S = Function | undefined, Dependency = any>(\r\n  cursor: number\r\n): [[S, Dependency], IFiber] => {\r\n  const current: IFiber<any> = getCurrentFiber()\r\n  const hooks =\r\n    current.hooks || (current.hooks = { list: [], effect: [], layout: [] })\r\n  if (cursor >= hooks.list.length) {\r\n    hooks.list.push([] as IEffect)\r\n  }\r\n  return [(hooks.list[cursor] as unknown) as [S, Dependency], current]\r\n}\r\n\r\nexport const isChanged = (a: DependencyList, b: DependencyList) => {\r\n  return !a || a.length !== b.length || b.some((arg, index) => arg !== a[index])\r\n}\r\n","import { IFiber, ITask, ITaskCallback } from \"./type\"\r\n\r\nconst queue: ITask[] = []\r\nconst threshold: number = 1000 / 60\r\nconst unit = []\r\nlet deadline: number = 0\r\n\r\nexport const schedule = (cb) => unit.push(cb) === 1 && postMessage()\r\n\r\nexport const scheduleWork = (callback: ITaskCallback, fiber: IFiber): void => {\r\n  const job = {\r\n    callback,\r\n    fiber,\r\n  }\r\n  queue.push(job)\r\n  schedule(flushWork)\r\n}\r\n\r\nconst postMessage = (() => {\r\n  const cb = () => unit.splice(0, unit.length).forEach((c) => c())\r\n  if (typeof MessageChannel !== \"undefined\") {\r\n    const { port1, port2 } = new MessageChannel()\r\n    port1.onmessage = cb\r\n    return () => port2.postMessage(null)\r\n  }\r\n  return () => setTimeout(cb)\r\n})()\r\n\r\nconst flushWork = (): void => {\r\n  deadline = getTime() + threshold\r\n  let job = peek(queue)\r\n  while (job && !shouldYield()) {\r\n    const { callback, fiber } = job as any\r\n    job.callback = null\r\n    const next = callback(fiber)\r\n    if (next) {\r\n      job.callback = next as any\r\n    } else {\r\n      queue.shift()\r\n    }\r\n    job = peek(queue)\r\n  }\r\n  job && schedule(flushWork)\r\n}\r\n\r\nexport const shouldYield = (): boolean => {\r\n  return (\r\n    (navigator as any)?.scheduling?.isInputPending() || getTime() >= deadline\r\n  )\r\n}\r\n\r\nexport const getTime = () => performance.now()\r\n\r\nconst peek = (queue: ITask[]) => queue[0]\r\n","import {\r\n  IFiber,\r\n  FreElement,\r\n  FC,\r\n  Attributes,\r\n  HTMLElementEx,\r\n  FreNode,\r\n  IRef,\r\n  IEffect,\r\n} from \"./type\"\r\nimport { createElement, updateElement } from \"./dom\"\r\nimport { resetCursor } from \"./hooks\"\r\nimport { scheduleWork, shouldYield, schedule } from \"./scheduler\"\r\nimport { isArr, createText } from \"./h\"\r\n\r\nlet currentFiber: IFiber\r\nlet finish = null\r\nlet deletes = []\r\n\r\nexport const enum LANE {\r\n  UPDATE = 1 << 1,\r\n  INSERT = 1 << 2,\r\n  REMOVE = 1 << 3,\r\n  SVG = 1 << 4,\r\n  DIRTY = 1 << 5,\r\n}\r\nexport const render = (\r\n  vnode: FreElement,\r\n  node: Node,\r\n  done?: () => void\r\n): void => {\r\n  const rootFiber = {\r\n    node,\r\n    props: { children: vnode },\r\n    done,\r\n  } as IFiber\r\n  dispatchUpdate(rootFiber)\r\n}\r\n\r\nexport const dispatchUpdate = (fiber?: IFiber) => {\r\n  if (fiber && !(fiber.lane & LANE.DIRTY)) {\r\n    fiber.lane = LANE.UPDATE | LANE.DIRTY\r\n    fiber.sibling = null\r\n    scheduleWork(reconcileWork as any, fiber)\r\n  }\r\n}\r\n\r\nconst reconcileWork = (WIP?: IFiber): boolean => {\r\n  while (WIP && !shouldYield()) WIP = reconcile(WIP)\r\n  if (WIP) return reconcileWork.bind(null, WIP)\r\n  if (finish) commitWork(finish)\r\n  return null\r\n}\r\n\r\nconst reconcile = (WIP: IFiber): IFiber | undefined => {\r\n  isFn(WIP.type) ? updateHook(WIP) : updateHost(WIP)\r\n  if (WIP.child) return WIP.child\r\n  while (WIP) {\r\n    if (!finish && WIP.lane & LANE.DIRTY) {\r\n      finish = WIP\r\n      WIP.lane &= ~LANE.DIRTY\r\n      return null\r\n    }\r\n    if (WIP.sibling) return WIP.sibling\r\n    WIP = WIP.parent\r\n  }\r\n}\r\n\r\nconst updateHook = <P = Attributes>(WIP: IFiber): void => {\r\n  currentFiber = WIP\r\n  resetCursor()\r\n  try {\r\n    var children = (WIP.type as FC<P>)(WIP.props)\r\n  } catch (e) {\r\n    if (!!e && typeof e.then === \"function\") {\r\n      const p = getParent(WIP)\r\n      if (!p.laziness) {\r\n        p.laziness = []\r\n        children = p.props.fallback\r\n      }\r\n      p.laziness.push(e)\r\n    } else throw e\r\n  }\r\n  isStr(children) && (children = createText(children as string))\r\n  reconcileChildren(WIP, children)\r\n}\r\n\r\nconst getParentNode = (WIP: IFiber): HTMLElement | undefined => {\r\n  while ((WIP = WIP.parent)) {\r\n    if (!isFn(WIP.type)) return WIP.node\r\n  }\r\n}\r\n\r\nconst getParent = (WIP: IFiber): IFiber | undefined => {\r\n  while ((WIP = WIP.parent)) {\r\n    if ((WIP.type as any).name === \"Suspense\") return WIP\r\n  }\r\n}\r\n\r\nconst updateHost = (WIP: IFiber): void => {\r\n  WIP.parentNode = getParentNode(WIP) as any\r\n\r\n  if (!WIP.node) {\r\n    if (WIP.type === \"svg\") WIP.lane |= LANE.SVG\r\n    WIP.node = createElement(WIP) as HTMLElementEx\r\n  }\r\n  reconcileChildren(WIP, WIP.props.children)\r\n}\r\n\r\nconst reconcileChildren = (WIP: any, children: FreNode): void => {\r\n  let aCh = WIP.kids || [],\r\n    bCh = (WIP.kids = arrayfy(children) as any),\r\n    aHead = 0,\r\n    bHead = 0,\r\n    aTail = aCh.length - 1,\r\n    bTail = bCh.length - 1,\r\n    map = null,\r\n    ch = Array(bCh.length),\r\n    next = WIP.sibling?.node ? WIP.sibling : null\r\n\r\n  while (aHead <= aTail && bHead <= bTail) {\r\n    let c = null\r\n    if (aCh[aHead] == null) {\r\n      aHead++\r\n    } else if (aCh[aTail] == null) {\r\n      aTail--\r\n    } else if (same(aCh[aHead], bCh[bHead])) {\r\n      c = bCh[bHead]\r\n      clone(c, aCh[aHead])\r\n      c.lane = LANE.UPDATE\r\n      ch[bHead] = c\r\n      aHead++\r\n      bHead++\r\n    } else if (same(aCh[aTail], bCh[bTail])) {\r\n      c = bCh[bTail]\r\n      clone(c, aCh[aTail])\r\n      c.lane = LANE.UPDATE\r\n      ch[bTail] = c\r\n      aTail--\r\n      bTail--\r\n    } else {\r\n      if (!map) {\r\n        map = new Map()\r\n        for (let i = aHead; i <= aTail; i++) {\r\n          let k = getKey(aCh[i])\r\n          k && map.set(k, i)\r\n        }\r\n      }\r\n      const key = getKey(bCh[bHead])\r\n      if (map.has(key)) {\r\n        const oldKid = aCh[map.get(key)]\r\n        c = bCh[bHead]\r\n        clone(c, oldKid)\r\n        c.lane = LANE.INSERT\r\n        c.after = aCh[aHead]\r\n        ch[bHead] = c\r\n        aCh[map.get(key)] = null\r\n      } else {\r\n        c = bCh[bHead]\r\n        c.lane = LANE.INSERT\r\n        c.node = null\r\n        c.after = aCh[aHead]\r\n      }\r\n      bHead++\r\n    }\r\n  }\r\n\r\n  const after = bTail <= bCh.length - 1 ? ch[bTail + 1] : next\r\n\r\n  while (bHead <= bTail) {\r\n    let c = bCh[bHead]\r\n    if (c) {\r\n      c.lane = LANE.INSERT\r\n      c.after = after\r\n      c.node = null\r\n    }\r\n    bHead++\r\n  }\r\n\r\n  while (aHead <= aTail) {\r\n    let c = aCh[aHead]\r\n    if (c) {\r\n      c.lane = LANE.REMOVE\r\n      deletes.push(c)\r\n    }\r\n    aHead++\r\n  }\r\n  for (var i = 0, prev = null; i < bCh.length; i++) {\r\n    const child = bCh[i]\r\n    if (child == null) continue\r\n    child.parent = WIP\r\n    if (i > 0) {\r\n      prev.sibling = child\r\n    } else {\r\n      if (WIP.lane & LANE.SVG) child.lane |= LANE.SVG\r\n      WIP.child = child\r\n    }\r\n    prev = child\r\n  }\r\n}\r\n\r\nfunction clone(a, b) {\r\n  a.lastProps = b.props\r\n  a.node = b.node\r\n  a.kids = b.kids\r\n  a.hooks = b.hooks\r\n  a.ref = b.ref\r\n}\r\n\r\nconst getKey = (vdom) => (vdom == null ? vdom : vdom.key)\r\nconst getType = (vdom) => (isFn(vdom.type) ? vdom.type.name : vdom.type)\r\n\r\nconst commitWork = (fiber: IFiber): void => {\r\n  fiber.parent ? commit(fiber) : commit(fiber.child)\r\n  deletes.forEach(commit)\r\n  fiber.done?.()\r\n  deletes = []\r\n  finish = null\r\n}\r\n\r\nfunction invokeHooks(fiber) {\r\n  const { hooks, lane, laziness } = fiber\r\n  if (laziness) {\r\n    Promise.all(laziness).then(() => {\r\n      fiber.laziness = null\r\n      dispatchUpdate(fiber)\r\n    })\r\n  }\r\n  if (hooks) {\r\n    if (lane & LANE.REMOVE) {\r\n      hooks.list.forEach((e) => e[2] && e[2]())\r\n    } else {\r\n      side(hooks.layout)\r\n      schedule(() => side(hooks.effect))\r\n    }\r\n  }\r\n}\r\n\r\nfunction wireKid(fiber) {\r\n  let kid = fiber\r\n  while (isFn(kid.type) && kid.child) kid = kid.child\r\n  const after = fiber.after || kid.after\r\n  kid.after = after\r\n  kid.lane |= fiber.lane\r\n  let s = kid.sibling\r\n  while (s) {\r\n    s.after = after\r\n    s.lane |= fiber.lane\r\n    s = s.sibling\r\n  }\r\n  return kid\r\n}\r\n\r\nconst commit = (fiber: IFiber): void => {\r\n  if (!fiber) return\r\n  let { type, lane, parentNode, node, ref } = fiber\r\n  if (isFn(type)) {\r\n    invokeHooks(fiber)\r\n    let kid = wireKid(fiber)\r\n    fiber.node = kid.node\r\n    if (fiber.lane & LANE.REMOVE) {\r\n      commit(kid)\r\n    } else {\r\n      commit(fiber.child)\r\n      commit(fiber.sibling)\r\n    }\r\n    fiber.lane = 0\r\n    return\r\n  }\r\n  if (lane & LANE.REMOVE) {\r\n    kidsRefer(fiber.kids)\r\n    parentNode.removeChild(fiber.node)\r\n    refer(ref, null)\r\n    fiber.lane = 0\r\n    return\r\n  }\r\n  if (lane & LANE.UPDATE) {\r\n    updateElement(node, fiber.lastProps || {}, fiber.props)\r\n  }\r\n  if (lane & LANE.INSERT) {\r\n    parentNode.insertBefore(fiber.node, fiber.after?.node)\r\n  }\r\n  fiber.lane = 0\r\n  refer(ref, node)\r\n  commit(fiber.child)\r\n  commit(fiber.sibling)\r\n}\r\n\r\nconst same = (a, b) => {\r\n  return getKey(a) === getKey(b) && getType(a) === getType(b)\r\n}\r\n\r\nconst arrayfy = (arr) => (!arr ? [] : isArr(arr) ? arr : [arr])\r\n\r\nconst refer = (ref: IRef, dom?: HTMLElement): void => {\r\n  if (ref)\r\n    isFn(ref) ? ref(dom) : ((ref as { current?: HTMLElement })!.current = dom)\r\n}\r\n\r\nconst kidsRefer = (kids: any): void => {\r\n  kids.forEach((kid) => {\r\n    kid.kids && kidsRefer(kid.kids)\r\n    refer(kid.ref, null)\r\n  })\r\n}\r\n\r\nconst side = (effects: IEffect[]): void => {\r\n  effects.forEach((e) => e[2] && e[2]())\r\n  effects.forEach((e) => (e[2] = e[0]()))\r\n  effects.length = 0\r\n}\r\n\r\nexport const getCurrentFiber = () => currentFiber || null\r\nexport const isFn = (x: any): x is Function => typeof x === \"function\"\r\nexport const isStr = (s: any): s is number | string =>\r\n  typeof s === \"number\" || typeof s === \"string\"\r\nexport const some = (v: any) => v != null && v !== false && v !== true\r\n","import { Attributes, FC, FreNode, IFiber, PropsWithChildren, FreElement } from './type'\r\nimport { some, isStr } from './reconciler'\r\n\r\n// Supported and simplify jsx2\r\n// * https://github.com/reactjs/rfcs/blob/createlement-rfc/text/0000-create-element-changes.md\r\nexport const h = function <P extends Attributes = {}>(type: FC<P>, attrs: P): Partial<IFiber> {\r\n  const props = attrs || ({} as P)\r\n  const key = props.key || null\r\n  const ref = props.ref || null\r\n\r\n  let children: FreNode[] = props.children as any || []\r\n  let simple = ''\r\n  const len = arguments.length\r\n  for (let i = 2; i < len; i++) {\r\n    let child = arguments[i]\r\n    const end = i === len - 1\r\n    const vnode = some(child) ? child : ''\r\n    const str = isStr(vnode)\r\n    // merge simple nodes\r\n    if (str) simple += String(vnode)\r\n    if (simple && (!str || end)) {\r\n      children.push(createText(simple))\r\n      simple = ''\r\n    }\r\n    if (!str) children.push(vnode)\r\n  }\r\n\r\n  // flat the nested array\r\n  while (children.some((v) => isArr(v))) {\r\n    children = [].concat(...children)\r\n  }\r\n\r\n  if (children.length) {\r\n    // if there is only on child, it not need an array, such as child use as a function\r\n    props.children = children.length === 1 ? children[0] : children\r\n  }\r\n  // delete them to reduce loop performance\r\n  delete props.key\r\n  delete props.ref\r\n\r\n  return { type, props, key, ref } as Partial<IFiber>\r\n}\r\n\r\nexport function createText(vnode: string) {\r\n  return { type: 'text', props: { nodeValue: vnode } } as FreElement\r\n}\r\n\r\nexport function Fragment(props) {\r\n  return props.children\r\n}\r\n\r\nexport const isArr = Array.isArray\r\n","import { h } from './h'\r\n\r\nexport function lazy(loader) {\r\n  let p\r\n  let comp\r\n  let err\r\n  return function Lazy(props) {\r\n    if (!p) {\r\n      p = loader()\r\n      p.then(\r\n        exports => (comp = exports.default || exports),\r\n        e => (err = e)\r\n      )\r\n    }\r\n    if (err) throw err\r\n    if (!comp) throw p\r\n    return h(comp, props)\r\n  }\r\n}\r\n\r\nexport function Suspense(props) {\r\n  return props.children\r\n}","export { h, Fragment, h as createElement } from \"./h\"\r\nexport { render } from \"./reconciler\"\r\nexport {\r\n  useState,\r\n  useReducer,\r\n  useEffect,\r\n  useMemo,\r\n  useCallback,\r\n  useRef,\r\n  useLayout,\r\n  useLayout as useLayoutEffect,\r\n} from \"./hooks\"\r\nexport { shouldYield } from \"./scheduler\"\r\nexport { lazy, Suspense } from \"./suspense\"\r\nexport * from \"./type\"\r\n","import { h, render, useEffect, useState, Fragment } from \"../../src/index\"\r\n\r\nfunction App() {\r\n  const [count, setCount] = useState(0)\r\n  const [two, setTwo] = useState(0)\r\n  useEffect(()=>{\r\n    setTimeout(()=>{\r\n      setCount(count+1)\r\n    },3000)\r\n  },[])\r\n  return (\r\n    <>\r\n      <Nil count={count}/>\r\n      <button onClick={() => setCount((c) => c + 1)}>{count}</button>\r\n      <button onClick={() => setTwo(two + 1)} style=\"color:#2ef\">\r\n        {two}\r\n      </button>\r\n    </>\r\n  )\r\n}\r\n\r\nfunction Nil(props) {\r\n  console.log(props.count)\r\n  const [count, setCount] = useState(0)\r\n  return <button onClick={() => setCount((c) => c + 1)}>{count}</button>\r\n}\r\n\r\nrender(<App />, document.body)\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] âœ¨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] ðŸš¨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">ðŸš¨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}